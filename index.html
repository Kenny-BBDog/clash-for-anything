<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clash For Anything | æå¿«è½¬æ¢</title>
    <!-- å¼•å…¥ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=JetBrains+Mono&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #00d2ff;
            --secondary: #3a7bd5;
            --bg-dark: #050505;
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --text-dim: #999;
            --succ: #00ffaa;
            --warn: #ffaa00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Outfit', sans-serif;
        }

        body {
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(0, 210, 255, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(58, 123, 213, 0.05) 0%, transparent 40%);
        }

        /* åŠ¨æ€èƒŒæ™¯èƒŒæ™¯å…‰æ™• */
        .glow {
            position: fixed;
            width: 600px;
            height: 600px;
            background: var(--primary);
            filter: blur(150px);
            opacity: 0.05;
            z-index: -1;
            border-radius: 50%;
            pointer-events: none;
            transition: all 1s ease;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 0.8s ease;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 3.5rem;
            font-weight: 800;
            letter-spacing: -1px;
            background: linear-gradient(to right, #fff, #888);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .subtitle {
            color: var(--text-dim);
            font-size: 1.2rem;
            font-weight: 300;
        }

        /* æ …æ ¼å¸ƒå±€ */
        .grid {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 30px;
        }

        @media (max-width: 900px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        /* ç»ç’ƒé¢æ¿ */
        .panel {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px;
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .panel:hover {
            border-color: rgba(255, 255, 255, 0.2);
        }

        h2 {
            font-size: 1.3rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--primary);
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: var(--text-dim);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* è¾“å…¥æ¡†æ ·å¼ */
        textarea,
        input,
        select {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 15px;
            color: #fff;
            font-size: 1rem;
            margin-bottom: 20px;
            transition: all 0.3s;
            font-family: 'JetBrains Mono', monospace;
        }

        textarea:focus,
        input:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(0, 210, 255, 0.1);
        }

        textarea {
            height: 180px;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--primary);
            color: #000;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            background: #fff;
            box-shadow: 0 10px 30px rgba(0, 210, 255, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.03);
            color: #fff;
            border: 1px solid var(--glass-border);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #fff;
        }

        /* èŠ‚ç‚¹æ ‡ç­¾ */
        .node-tag {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 6px 14px;
            border-radius: 100px;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 0 5px 10px 0;
            animation: scaleIn 0.3s ease;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .remove-node {
            color: #ff4444;
            cursor: pointer;
            font-weight: bold;
        }

        /* é…ç½®ç»„ */
        .config-group {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid var(--glass-border);
        }

        /* å¼€å…³è®¾è®¡ */
        .switch-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
        }

        /* éšè—çš„è¾“å‡ºåŒº */
        .output-container {
            margin-top: 40px;
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .code-block {
            background: #000;
            border-radius: 16px;
            padding: 25px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: #ccc;
            overflow: auto;
            max-height: 500px;
            border: 1px solid var(--glass-border);
            position: relative;
        }

        .copy-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: #000;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 800;
            cursor: pointer;
        }

        /* åº•éƒ¨ */
        footer {
            margin-top: 80px;
            text-align: center;
            color: var(--text-dim);
            font-size: 0.8rem;
            padding-bottom: 40px;
        }

        /* è£…é¥° */
        .badge {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 5px;
        }
    </style>
</head>

<body>
    <div class="glow" id="glow"></div>

    <div class="container">
        <header>
            <h1>CLASH FOR ANYTHING</h1>
            <p class="subtitle">æè‡´çš„å‚»ç“œå·¥å…· Â· ä½å®…IPçƒ­æ’æ‹” Â· å…¨è‡ªåŠ¨é˜²å°å·</p>
        </header>

        <div class="grid">
            <!-- å·¦ä¾§ï¼šèŠ‚ç‚¹è¾“å…¥ -->
            <div class="panel">
                <h2><span>01</span> è¾“å…¥èŠ‚ç‚¹é“¾æ¥ <span class="badge">VLESS/VMess/SS</span></h2>
                <label>ç²˜è´´åŒºåŸŸ (æ”¯æŒå¤šè¡Œæ‰¹é‡è¾“å…¥)</label>
                <textarea id="links" placeholder="vless://...&#10;vmess://...&#10;æ”¯æŒå°†å¤šä¸ªæœåŠ¡å™¨é“¾æ¥ä¸€èµ·ä¸¢è¿›æ¥"></textarea>

                <div id="nodeTags"></div>

                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" style="flex: 1" onclick="clearAll()">æ¸…é™¤æ‰€æœ‰</button>
                    <button class="btn btn-primary" style="flex: 2" onclick="parseNodes()">âš¡ è§£æå¹¶æ·»åŠ èŠ‚ç‚¹</button>
                </div>

                <div class="config-group">
                    <h2><span>02</span> å¸¸è§„é€‰é¡¹</h2>
                    <div class="switch-container">
                        <div>
                            <label style="margin-bottom: 0;">ç”Ÿæˆ Windows é…ç½®</label>
                            <span style="font-size: 0.7rem; color: #666;">(Mihomo å†…æ ¸ä¸“ç”¨)</span>
                        </div>
                        <input type="checkbox" id="win-check" checked style="width: auto; margin:0">
                    </div>
                    <div class="switch-container">
                        <div>
                            <label style="margin-bottom: 0;">ç”Ÿæˆ Android é…ç½®</label>
                            <span style="font-size: 0.7rem; color: #666;">(Clash Meta ä¸“ç”¨)</span>
                        </div>
                        <input type="checkbox" id="android-check" checked style="width: auto; margin:0">
                    </div>

                    <button class="btn btn-primary" onclick="generate()"
                        style="background: var(--succ); color: #000;">ğŸš€ ä¸€é”®ç”Ÿæˆé…ç½®æ–‡ä»¶</button>
                </div>
            </div>

            <!-- å³ä¾§ï¼šçƒ­æ’æ‹”ä½å®… IP -->
            <div class="panel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                    <h2 style="margin:0; color: var(--warn);"><span>ğŸ </span> ä½å®… IP æ¨¡å—</h2>
                    <div class="badge" title="æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼  GitHub">ğŸ”’ æœ¬åœ°åŠ å¯†å­˜å‚¨</div>
                </div>

                <div class="tip"
                    style="background: rgba(255,170,0,0.05); padding: 15px; border-radius: 12px; margin-bottom: 20px; font-size: 0.8rem; border-left: 3px solid var(--warn);">
                    æ¨èå¼€å¯ï¼å¯ç”¨å AI æµé‡ï¼ˆClaude/ChatGPTï¼‰è‡ªåŠ¨èµ°ä½å®… IPï¼Œæ— éœ€ä»»ä½•é¢å¤–æ“ä½œã€‚
                </div>

                <div class="switch-container">
                    <label style="margin:0">å¯ç”¨çƒ­æ’æ‹”æ¨¡å—</label>
                    <input type="checkbox" id="res-enable" style="width: auto; margin:0" onchange="saveResConfig()">
                </div>

                <label>ä½å®… IP æœåŠ¡å™¨</label>
                <input type="text" id="res-host" placeholder="ä¾‹å¦‚: 161.77.227.227" oninput="saveResConfig()">

                <label>ç«¯å£</label>
                <input type="text" id="res-port" placeholder="ä¾‹å¦‚: 12324" oninput="saveResConfig()">

                <label>è´¦å·</label>
                <input type="text" id="res-user" placeholder="ç”¨æˆ·å" oninput="saveResConfig()">

                <label>å¯†ç </label>
                <input type="password" id="res-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" oninput="saveResConfig()">

                <label>å‰ç½®è½¬å‘èŠ‚ç‚¹ (å¿…é€‰)</label>
                <select id="res-dialer" onchange="saveResConfig()">
                    <option value="">-- è¯·å…ˆè§£æèŠ‚ç‚¹ --</option>
                </select>
            </div>
        </div>

        <!-- è¾“å‡ºåŒºåŸŸ -->
        <div class="output-container" id="output-box">
            <div class="panel" style="background: #000; border: 1px solid var(--primary);">
                <div style="display:flex; justify-content: space-between; margin-bottom: 15px;">
                    <h2>æ‰§è¡Œç»“æœ <span id="platform-label" class="badge"></span></h2>
                    <div style="display:flex; gap:10px">
                        <button class="btn btn-primary" style="padding: 8px 15px; font-size: 0.8rem;"
                            onclick="copyConfig()">ç‚¹å‡»å¤åˆ¶å…¨æ–‡</button>
                        <button class="btn btn-secondary" style="padding: 8px 15px; font-size: 0.8rem;"
                            onclick="downloadConfig()">æœ¬åœ°ç›´æ¥ä¸‹è½½</button>
                    </div>
                </div>
                <div class="code-block" id="final-yaml"></div>
            </div>
        </div>

        <footer>
            <p>Â© 2026 Developed by <a href="https://github.com/Kenny-BBDog/clash-for-anything"
                    target="_blank">Kenny-BBDog</a></p>
            <p style="margin-top:10px; opacity:0.5; font-size: 0.7rem;">æ ¸å¿ƒè§„åˆ™å·²å†…ç½®ä¼˜åŒ–ç‰ˆå¾®ä¿¡ CDN & AI é˜²å°ç³»ç»Ÿ</p>
        </footer>
    </div>

    <script>
        let nodes = [];
        let generatedYaml = "";

        // é¡µé¢åˆå§‹åŒ–ï¼šè¯»å–æœ¬åœ°å­˜å‚¨
        window.onload = () => {
            const saved = localStorage.getItem('res_config');
            if (saved) {
                const config = JSON.parse(saved);
                document.getElementById('res-enable').checked = config.enable;
                document.getElementById('res-host').value = config.host || '';
                document.getElementById('res-port').value = config.port || '';
                document.getElementById('res-user').value = config.user || '';
                document.getElementById('res-pass').value = config.pass || '';
                // è½¬å‘èŠ‚ç‚¹åœ¨è§£æåä¼šé‡æ–°é€‰æ‹©
            }
        };

        // é¼ æ ‡ç§»åŠ¨èƒŒæ™¯è·Ÿéš
        document.addEventListener('mousemove', (e) => {
            const glow = document.getElementById('glow');
            glow.style.left = e.clientX - 300 + 'px';
            glow.style.top = e.clientY - 300 + 'px';
        });

        // ä¿å­˜ä½å®… IP é…ç½®åˆ°æœ¬åœ°
        function saveResConfig() {
            const config = {
                enable: document.getElementById('res-enable').checked,
                host: document.getElementById('res-host').value,
                port: document.getElementById('res-port').value,
                user: document.getElementById('res-user').value,
                pass: document.getElementById('res-pass').value,
                dialer: document.getElementById('res-dialer').value
            };
            localStorage.setItem('res_config', JSON.stringify(config));
        }

        // è§£æèŠ‚ç‚¹
        function parseNodes() {
            const input = document.getElementById('links').value;
            const lines = input.split('\n');
            let newNodesCount = 0;

            lines.forEach(line => {
                const l = line.trim();
                if (!l) return;

                try {
                    let node = null;
                    if (l.startsWith('vless://')) node = parseVless(l);
                    else if (l.startsWith('vmess://')) node = parseVmess(l);

                    if (node && !nodes.find(n => n.name === node.name)) {
                        nodes.push(node);
                        newNodesCount++;
                    }
                } catch (e) { console.error("è§£æå¤±è´¥:", e); }
            });

            renderNodes();
            updateDialerList();
            document.getElementById('links').value = "";
        }

        function renderNodes() {
            const container = document.getElementById('nodeTags');
            container.innerHTML = nodes.map((n, i) => `
                <div class="node-tag">
                    ${n.name} <span class="badge">${n.type}</span>
                    <span class="remove-node" onclick="removeNode(${i})">âœ•</span>
                </div>
            `).join('');
        }

        function removeNode(i) {
            nodes.splice(i, 1);
            renderNodes();
            updateDialerList();
        }

        function clearAll() {
            nodes = [];
            renderNodes();
            updateDialerList();
        }

        function updateDialerList() {
            const select = document.getElementById('res-dialer');
            const currentVal = select.value;
            select.innerHTML = '<option value="">-- é€‰æ‹©å‰ç½®è½¬å‘èŠ‚ç‚¹ --</option>' +
                nodes.map(n => `<option value="${n.name}">${n.name}</option>`).join('');

            // æ¢å¤ä¹‹å‰é€‰ä¸­çš„
            if (nodes.find(n => n.name === currentVal)) select.value = currentVal;
        }

        function parseVless(link) {
            const name = decodeURIComponent(link.split('#')[1] || "VLESS_Node");
            const url = new URL(link.split('#')[0]);
            const uuid = url.username;
            const host = url.hostname;
            const port = url.port;
            const params = new URLSearchParams(url.search);

            let node = {
                name: name, type: 'vless', server: host, port: parseInt(port),
                uuid: uuid, network: params.get('type') || 'tcp'
            };

            if (params.get('security') === 'reality') {
                node.tls = true;
                node.servername = params.get('sni');
                node['client-fingerprint'] = params.get('fp') || 'chrome';
                node['reality-opts'] = { 'public-key': params.get('pbk'), 'short-id': params.get('sid') };
            }
            if (params.get('flow')) node.flow = params.get('flow');

            return node;
        }

        function parseVmess(link) {
            const data = JSON.parse(atob(link.replace('vmess://', '')));
            return {
                name: data.ps, type: 'vmess', server: data.add, port: parseInt(data.port),
                uuid: data.id, alterId: parseInt(data.aid), cipher: 'auto',
                tls: data.tls === 'tls', network: data.net || 'tcp'
            };
        }

        // æ ¸å¿ƒç”Ÿæˆé€»è¾‘
        function generate() {
            if (nodes.length === 0) { alert("è¯·å…ˆæ·»åŠ è‡³å°‘ä¸€ä¸ªèŠ‚ç‚¹é“¾æ¥ï¼"); return; }

            const isWin = document.getElementById('win-check').checked;
            const isRes = document.getElementById('res-enable').checked;
            const resData = {
                host: document.getElementById('res-host').value,
                port: document.getElementById('res-port').value,
                user: document.getElementById('res-user').value,
                pass: document.getElementById('res-pass').value,
                dialer: document.getElementById('res-dialer').value
            };

            if (isRes && (!resData.host || !resData.dialer)) {
                alert("ç”±äºå¼€å¯äº†ä½å®…IPæ¨¡å—ï¼Œè¯·å¡«å†™æœåŠ¡å™¨åœ°å€å¹¶é€‰æ‹©è½¬å‘èŠ‚ç‚¹ï¼");
                return;
            }

            const platform = isWin ? 'Windows' : 'Android';
            document.getElementById('platform-label').innerText = platform;

            // æ„å»º YAML
            let yaml = "port: 7890\nsocks-port: 7891\nmixed-port: 7892\nallow-lan: true\nmode: rule\nlog-level: warning\nipv6: false\n\n";

            if (isWin) {
                yaml += "geodata-mode: true\nunified-delay: true\ntcp-concurrent: true\n\n";
            }

            yaml += "dns:\n  enable: true\n  enhanced-mode: fake-ip\n  fake-ip-range: 198.18.0.1/16\n  nameserver:\n    - https://doh.pub/dns-query\n    - https://dns.alidns.com/dns-query\n  fallback:\n    - https://dns.google/dns-query\n\n";

            yaml += "proxies:\n";

            // å†™å…¥æ™®é€šèŠ‚ç‚¹
            nodes.forEach(n => {
                yaml += `  - name: "${n.name}"\n    type: ${n.type}\n    server: ${n.server}\n    port: ${n.port}\n    uuid: ${n.uuid}\n`;
                if (n.type === 'vmess') yaml += `    alterId: ${n.alterId}\n    cipher: ${n.cipher}\n`;
                if (n.tls) yaml += `    tls: true\n    servername: ${n.servername}\n    client-fingerprint: ${n['client-fingerprint']}\n`;
                if (n['reality-opts']) yaml += `    reality-opts:\n      public-key: ${n['reality-opts']['public-key']}\n      short-id: ${n['reality-opts']['short-id']}\n`;
                yaml += `    network: ${n.network}\n`;
            });

            // å†™å…¥ä½å®… IP
            if (isRes) {
                yaml += `  - name: "ä½å®…IP"\n    type: socks5\n    server: ${resData.host}\n    port: ${resData.port}\n    username: ${resData.user}\n    password: ${resData.pass}\n    dialer-proxy: "${resData.dialer}"\n`;
            }

            yaml += "\nproxy-groups:\n  - name: ğŸš€ ä»£ç†é€‰æ‹©\n    type: select\n    proxies:\n";
            if (isRes) yaml += "      - ä½å®…IP\n";
            nodes.forEach(n => yaml += `      - "${n.name}"\n`);
            yaml += "      - DIRECT\n\n";

            // è§„åˆ™éƒ¨åˆ† (å¼•ç”¨å†…ç½®æœ€å¼ºè§„åˆ™)
            yaml += "rules:\n";
            yaml += "  - IP-CIDR,127.0.0.0/8,DIRECT\n" +
                "  - IP-CIDR,192.168.0.0/16,DIRECT\n";

            const aiProxy = isRes ? "ä½å®…IP" : "ğŸš€ ä»£ç†é€‰æ‹©";

            // AI è·¯ç”± (é˜²å°å·æ ¸å¿ƒ)
            yaml += `  - DOMAIN-SUFFIX,anthropic.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,claude.ai,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,openai.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,chatgpt.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,oaistatic.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,oaiusercontent.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,cursor.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,cursor.sh,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,gemini.google.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,grok.com,${aiProxy}\n` +
                `  - DOMAIN-SUFFIX,antigravity.ai,${aiProxy}\n`;

            // å¾®ä¿¡ CDN ä¼˜åŒ–
            yaml += "  - DOMAIN-SUFFIX,weixinbridge.com,DIRECT\n" +
                "  - DOMAIN-SUFFIX,qpic.cn,DIRECT\n" +
                "  - DOMAIN-SUFFIX,qlogo.cn,DIRECT\n" +
                "  - DOMAIN-SUFFIX,gtimg.com,DIRECT\n" +
                "  - DOMAIN-SUFFIX,weixin.qq.com,DIRECT\n" +
                "  - DOMAIN-SUFFIX,wechat.com,DIRECT\n" +
                "  - DOMAIN-SUFFIX,wechatpay.cn,DIRECT\n" +
                "  - DOMAIN-SUFFIX,wxs.qq.com,DIRECT\n";

            // å›½å†…å…œåº•
            yaml += "  - DOMAIN-SUFFIX,cn,DIRECT\n" +
                "  - MATCH,ğŸš€ ä»£ç†é€‰æ‹©\n";

            generatedYaml = yaml;
            document.getElementById('final-yaml').innerText = yaml;
            document.getElementById('output-box').style.display = "block";
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }

        function copyConfig() {
            navigator.clipboard.writeText(generatedYaml);
            alert("å…¨æ–‡å·²å¤åˆ¶ï¼å» Clash ç²˜è´´å³å¯ã€‚");
        }

        function downloadConfig() {
            const blob = new Blob([generatedYaml], { type: 'text/yaml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = document.getElementById('win-check').checked ? "config_win.yaml" : "config_android.yaml";
            a.click();
        }
    </script>
</body>

</html>