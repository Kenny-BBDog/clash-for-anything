port: 7890
socks-port: 7891
mixed-port: 7892
allow-lan: true
bind-address: '*'
mode: rule
log-level: warning
ipv6: false
external-controller: 127.0.0.1:9090
unified-delay: true
tcp-concurrent: true
geodata-mode: true
geodata-loader: memconservative
geo-auto-update: true
geo-update-interval: 24

# ===== æ€§èƒ½ä¼˜åŒ–å‚æ•° =====
keep-alive-interval: 30
find-process-mode: strict
global-client-fingerprint: chrome

# ===== Sniffer åŸŸåå—…æ¢ - è§£å†³ fake-ip åˆ†æµé—®é¢˜ =====
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

# ===== TUN æ¨¡å¼é…ç½® =====
# âš ï¸ æ³¨æ„ï¼šMTU ä¸è¦è®¾ç½®ä¸º 9000ï¼Œä¼šå¯¼è‡´è¿æ¥ä¸­æ–­ï¼
tun:
  enable: true
  stack: mixed
  dns-hijack:
    - "any:53"
  auto-route: true
  auto-detect-interface: true
  strict-route: false  # è®¾ä¸º true å¯èƒ½ä¸ Windows TUN é©±åŠ¨å†²çª
  mtu: 1500            # æ ‡å‡†ä»¥å¤ªç½‘ MTUï¼Œä¸è¦æ”¹å¤§ï¼

# ===== DNS é…ç½® - å›½å†…å¤–åˆ†æµ =====
dns:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "*.localhost"
    - "*.localdomain"
    - "time.*.com"
    - "time.*.gov"
    - "time.*.edu.cn"
    - "time.*.apple.com"
    - "time?.*.com"
    - "ntp.*.com"
    - "*.ntp.org.cn"
    - "+.pool.ntp.org"
    - "localhost.ptlogin2.qq.com"
    - "localhost.sec.qq.com"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "network-test.debian.org"
    - "detectportal.firefox.com"
    - "*.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "xbox.*.*.microsoft.com"
    - "+.xboxlive.com"
    - "+.battlenet.com.cn"
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
    - https://dns.quad9.net/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    geosite:
      - gfw
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 127.0.0.1/32
    domain:
      - "+.google.com"
      - "+.facebook.com"
      - "+.twitter.com"
      - "+.youtube.com"
      - "+.xn--ngstr-lra8j.com"
      - "+.googleapis.cn"

proxies:
  # DMIT ç¾å›½èŠ‚ç‚¹
  - name: DMIT
    type: vless
    server: 64.186.234.15
    port: 48870
    uuid: e7bef160-d9db-4e98-81f2-b346ec4d1c33
    tls: true
    flow: xtls-rprx-vision
    servername: www.oracle.com
    client-fingerprint: chrome
    network: tcp
    reality-opts:
      public-key: ojTyzmLo5kp63KO99GwDxaE0CIjkhiI3xV9eiUOs7lE
      short-id: "9b"

  # æ—¥æœ¬ JP-IIJ èŠ‚ç‚¹
  - name: JP-IIJ
    type: vless
    server: 45.192.241.28
    port: 666
    uuid: 0ad66a43-0ea7-4070-a8fa-7bcf471e5605
    tls: true
    servername: www.yahoo.co.jp
    client-fingerprint: chrome
    network: tcp
    reality-opts:
      public-key: A4GdKU0nm_SyNGqJJ0GWETc-AdRqTcQFK2mOE5IR3hQ
      short-id: e6a80cfca7e1

  # ä½å®…IPï¼ˆé€šè¿‡ DMIT é“¾å¼è¿æ¥ï¼‰
  - name: ä½å®…IP
    type: socks5
    server: 161.77.227.227
    port: 12324
    username: 14af10dcbb5dd
    password: a8b1e5e806
    dialer-proxy: DMIT

proxy-groups:
  - name: ğŸš€ ä»£ç†é€‰æ‹©
    type: select
    proxies:
      - ä½å®…IP
      - DMIT
      - JP-IIJ
      - DIRECT

rules:
  # ===== IPRoyal å¿…é¡»èµ° DMITï¼ˆé¿å…å¾ªç¯ï¼‰=====
  - IP-CIDR,161.77.227.227/32,DMIT,no-resolve
  
  # ===== è¿›ç¨‹çº§åˆ«è§„åˆ™ - éœ€è¦çº¯å‡€å›½å¤–ç¯å¢ƒçš„åº”ç”¨ =====
  # Claude Code / Antigravity
  - PROCESS-NAME,claude.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,antigravity.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,Antigravity.exe,ğŸš€ ä»£ç†é€‰æ‹©
  
  # VS Code ç›¸å…³ï¼ˆCopilot ç­‰ï¼‰
  - PROCESS-NAME,Code.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,code.exe,ğŸš€ ä»£ç†é€‰æ‹©
  
  # Cursor
  - PROCESS-NAME,Cursor.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,cursor.exe,ğŸš€ ä»£ç†é€‰æ‹©
  
  # JetBrains IDE
  - PROCESS-NAME,idea64.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,pycharm64.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,webstorm64.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,goland64.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,rider64.exe,ğŸš€ ä»£ç†é€‰æ‹©
  
  # Node.jsï¼ˆnpmã€yarn ç­‰ï¼‰
  - PROCESS-NAME,node.exe,ğŸš€ ä»£ç†é€‰æ‹©
  
  # Git
  - PROCESS-NAME,git.exe,ğŸš€ ä»£ç†é€‰æ‹©
  - PROCESS-NAME,git-remote-https.exe,ğŸš€ ä»£ç†é€‰æ‹©
  
  # AdsPowerï¼ˆéœ€è¦è¿æ¥ IPRoyalï¼‰
  - PROCESS-NAME,adspower.exe,DMIT
  - PROCESS-NAME,AdsPower.exe,DMIT
  
  # ======================================================
  # ===== AI åº”ç”¨ - èµ°ä»£ç†é€‰æ‹©ï¼ˆéœ€è¦ä½å®…IPæ—¶æ‰‹åŠ¨åˆ‡æ¢ï¼‰=====
  # ======================================================
  # âš ï¸ é€»è¾‘å˜æ›´è¯´æ˜ï¼š
  # - AI åº”ç”¨ç°åœ¨èµ° ğŸš€ ä»£ç†é€‰æ‹©ï¼Œä¸å†å¼ºåˆ¶èµ°ä½å®…IP
  # - å¦‚éœ€ä½¿ç”¨ä½å®…IPï¼Œè¯·æ‰‹åŠ¨å°†ä»£ç†é€‰æ‹©åˆ‡æ¢åˆ°"ä½å®…IP"
  # - è¿™æ ·å¯ä»¥é¿å…ä½å®…IPå¤±æ•ˆæ—¶å½±å“æ‰€æœ‰AIè®¿é—®
  # ======================================================
  
  # ----- Claude / Anthropic -----
  - DOMAIN-SUFFIX,anthropic.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,claude.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,claudeusercontent.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,api.anthropic.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,statsig.anthropic.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-KEYWORD,anthropic,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-KEYWORD,claude,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- OpenAI / ChatGPT -----
  - DOMAIN-SUFFIX,openai.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,chatgpt.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,oaiusercontent.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,oaistatic.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,sora.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,openaiapi-site.azureedge.net,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,api.openai.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,platform.openai.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,auth0.openai.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-KEYWORD,openai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-KEYWORD,chatgpt,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- Antigravity -----
  - DOMAIN-SUFFIX,antigravity.dev,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,antigravity.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-KEYWORD,antigravity,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- Cursor AI -----
  - DOMAIN-SUFFIX,cursor.sh,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,cursor.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,api2.cursor.sh,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-KEYWORD,cursor,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- GitHub Copilot -----
  - DOMAIN,api.githubcopilot.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,copilot-proxy.githubusercontent.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,copilot.github.com,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- Google AI / Gemini -----
  - DOMAIN-SUFFIX,gemini.google.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,bard.google.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,generativelanguage.googleapis.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,ai.google.dev,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,aistudio.google.com,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- å…¶ä»– AI æœåŠ¡ -----
  - DOMAIN-SUFFIX,perplexity.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,mistral.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,x.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,grok.x.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,groq.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,together.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,replicate.com,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,huggingface.co,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN-SUFFIX,cohere.ai,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- JetBrains AI -----
  - DOMAIN-SUFFIX,jetbrains.ai,ğŸš€ ä»£ç†é€‰æ‹©
  - DOMAIN,ai.jetbrains.com,ğŸš€ ä»£ç†é€‰æ‹©
  
  # ----- Sentryï¼ˆé”™è¯¯ä¸ŠæŠ¥ï¼‰-----
  - DOMAIN-SUFFIX,sentry.io,ğŸš€ ä»£ç†é€‰æ‹©
  

  # ===== ç§æœ‰ç½‘ç»œç›´è¿ =====
  - DOMAIN-SUFFIX,local,DIRECT
  - DOMAIN-SUFFIX,localhost,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,17.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR,224.0.0.0/4,DIRECT,no-resolve
  - IP-CIDR6,fe80::/10,DIRECT,no-resolve
  
  # ===== å›½å†…å¸¸ç”¨åº”ç”¨/ç½‘ç«™åŸŸåç›´è¿ï¼ˆä¼˜å…ˆçº§é«˜ï¼‰=====
  # è…¾è®¯ç³» / å¾®ä¿¡ï¼ˆå®Œæ•´åª’ä½“ CDN åŸŸåï¼‰
  - DOMAIN-SUFFIX,qq.com,DIRECT
  - DOMAIN-SUFFIX,gtimg.com,DIRECT
  - DOMAIN-SUFFIX,qpic.cn,DIRECT
  - DOMAIN-SUFFIX,qlogo.cn,DIRECT
  - DOMAIN-SUFFIX,weixin.qq.com,DIRECT
  - DOMAIN-SUFFIX,wechat.com,DIRECT
  - DOMAIN-SUFFIX,tencent.com,DIRECT
  - DOMAIN-SUFFIX,myqcloud.com,DIRECT
  # å¾®ä¿¡å›¾ç‰‡/è§†é¢‘/è¯­éŸ³ä¸“ç”¨ CDN
  - DOMAIN-SUFFIX,wxs.qq.com,DIRECT
  - DOMAIN-SUFFIX,wx.qq.com,DIRECT
  - DOMAIN-SUFFIX,wx.qlogo.cn,DIRECT
  - DOMAIN-SUFFIX,weixinbridge.com,DIRECT
  - DOMAIN-SUFFIX,wechatpay.cn,DIRECT
  - DOMAIN-SUFFIX,servicewechat.com,DIRECT
  - DOMAIN-SUFFIX,weixin.com,DIRECT
  - DOMAIN-SUFFIX,weixinsxy.com,DIRECT
  # å¾®ä¿¡æœ‹å‹åœˆ/å…¬ä¼—å·å›¾ç‰‡è§†é¢‘
  - DOMAIN-SUFFIX,mmsns.qpic.cn,DIRECT
  - DOMAIN-SUFFIX,mmbiz.qpic.cn,DIRECT
  - DOMAIN-SUFFIX,mp.weixin.qq.com,DIRECT
  # è…¾è®¯äº‘ CDNï¼ˆå¾®ä¿¡åª’ä½“å­˜å‚¨ï¼‰
  - DOMAIN-SUFFIX,file.myqcloud.com,DIRECT
  - DOMAIN-SUFFIX,cos.ap-guangzhou.myqcloud.com,DIRECT
  - DOMAIN-SUFFIX,cos.ap-shanghai.myqcloud.com,DIRECT
  - DOMAIN-SUFFIX,cos.ap-beijing.myqcloud.com,DIRECT
  - DOMAIN-SUFFIX,cdn-go.cn,DIRECT
  - DOMAIN-SUFFIX,qcloud.com,DIRECT
  - DOMAIN-SUFFIX,qcloudimg.com,DIRECT
  - DOMAIN-SUFFIX,qcloudcdn.com,DIRECT
  - DOMAIN-SUFFIX,tencentyun.com,DIRECT
  # è…¾è®¯è§†é¢‘/éŸ³ä¹
  - DOMAIN-SUFFIX,v.qq.com,DIRECT
  - DOMAIN-SUFFIX,video.qq.com,DIRECT
  - DOMAIN-SUFFIX,y.qq.com,DIRECT
  - DOMAIN-SUFFIX,music.qq.com,DIRECT
  # å¾®ä¿¡å°ç¨‹åº
  - DOMAIN-SUFFIX,wafer.qq.com,DIRECT
  - DOMAIN-SUFFIX,wxapp.tc.qq.com,DIRECT
  # å¾®ä¿¡å…³é”®è¯å…œåº•
  - DOMAIN-KEYWORD,weixin,DIRECT
  - DOMAIN-KEYWORD,wechat,DIRECT
  - DOMAIN-KEYWORD,qpic,DIRECT
  - DOMAIN-KEYWORD,myqcloud,DIRECT
  

  # é˜¿é‡Œç³»
  - DOMAIN-SUFFIX,taobao.com,DIRECT
  - DOMAIN-SUFFIX,tmall.com,DIRECT
  - DOMAIN-SUFFIX,alicdn.com,DIRECT
  - DOMAIN-SUFFIX,alipay.com,DIRECT
  - DOMAIN-SUFFIX,aliyun.com,DIRECT
  - DOMAIN-SUFFIX,aliyuncs.com,DIRECT
  - DOMAIN-SUFFIX,alibaba.com,DIRECT
  - DOMAIN-SUFFIX,dingtalk.com,DIRECT
  
  # ç™¾åº¦ç³»
  - DOMAIN-SUFFIX,baidu.com,DIRECT
  - DOMAIN-SUFFIX,bdstatic.com,DIRECT
  - DOMAIN-SUFFIX,bdimg.com,DIRECT
  - DOMAIN-SUFFIX,baidubce.com,DIRECT
  - DOMAIN-SUFFIX,bcebos.com,DIRECT
  
  # äº¬ä¸œ
  - DOMAIN-SUFFIX,jd.com,DIRECT
  - DOMAIN-SUFFIX,jd.hk,DIRECT
  - DOMAIN-SUFFIX,360buyimg.com,DIRECT
  - DOMAIN-SUFFIX,jdcloud.com,DIRECT
  
  # å­—èŠ‚è·³åŠ¨
  - DOMAIN-SUFFIX,bytedance.com,DIRECT
  - DOMAIN-SUFFIX,douyin.com,DIRECT
  - DOMAIN-SUFFIX,douyinvod.com,DIRECT
  - DOMAIN-SUFFIX,douyinpic.com,DIRECT
  - DOMAIN-SUFFIX,toutiao.com,DIRECT
  - DOMAIN-SUFFIX,pstatp.com,DIRECT
  - DOMAIN-SUFFIX,snssdk.com,DIRECT
  
  # Bç«™
  - DOMAIN-SUFFIX,bilibili.com,DIRECT
  - DOMAIN-SUFFIX,bilivideo.com,DIRECT
  - DOMAIN-SUFFIX,hdslb.com,DIRECT
  - DOMAIN-SUFFIX,biliapi.net,DIRECT
  - DOMAIN-SUFFIX,biliapi.com,DIRECT
  
  # ç½‘æ˜“
  - DOMAIN-SUFFIX,163.com,DIRECT
  - DOMAIN-SUFFIX,126.net,DIRECT
  - DOMAIN-SUFFIX,netease.com,DIRECT
  - DOMAIN-SUFFIX,ydstatic.com,DIRECT
  
  # å¾®åš
  - DOMAIN-SUFFIX,weibo.com,DIRECT
  - DOMAIN-SUFFIX,weibo.cn,DIRECT
  - DOMAIN-SUFFIX,sinaimg.cn,DIRECT
  - DOMAIN-SUFFIX,sinajs.cn,DIRECT
  - DOMAIN-SUFFIX,sina.com.cn,DIRECT
  
  # çŸ¥ä¹
  - DOMAIN-SUFFIX,zhihu.com,DIRECT
  - DOMAIN-SUFFIX,zhimg.com,DIRECT
  
  # ç¾å›¢/é¥¿äº†ä¹ˆ
  - DOMAIN-SUFFIX,meituan.com,DIRECT
  - DOMAIN-SUFFIX,meituan.net,DIRECT
  - DOMAIN-SUFFIX,eleme.cn,DIRECT
  
  # å°ç±³/åä¸º
  - DOMAIN-SUFFIX,xiaomi.com,DIRECT
  - DOMAIN-SUFFIX,mi.com,DIRECT
  - DOMAIN-SUFFIX,miui.com,DIRECT
  - DOMAIN-SUFFIX,huawei.com,DIRECT
  - DOMAIN-SUFFIX,hicloud.com,DIRECT
  
  # å…¶ä»–å›½å†…å¸¸ç”¨
  - DOMAIN-SUFFIX,csdn.net,DIRECT
  - DOMAIN-SUFFIX,jianshu.com,DIRECT
  - DOMAIN-SUFFIX,gitee.com,DIRECT
  - DOMAIN-SUFFIX,oschina.net,DIRECT
  - DOMAIN-SUFFIX,cnblogs.com,DIRECT
  - DOMAIN-SUFFIX,ctrip.com,DIRECT
  - DOMAIN-SUFFIX,12306.cn,DIRECT
  - DOMAIN-SUFFIX,suning.com,DIRECT
  - DOMAIN-SUFFIX,pinduoduo.com,DIRECT
  - DOMAIN-SUFFIX,kuaishou.com,DIRECT
  
  # ===== å›½å†…åŸŸå/IP geosite è§„åˆ™ =====
  - GEOSITE,cn,DIRECT
  - GEOIP,cn,DIRECT,no-resolve
  
  # ===== å…¶ä»–èµ°ä»£ç† =====
  - MATCH,ğŸš€ ä»£ç†é€‰æ‹©
